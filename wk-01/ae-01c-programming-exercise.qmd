---
title: "Untitled"
format: html
editor: visual
---

# Data import

Data can be imported from many different sources. In this exercise, we import data from:

1.  a CSV file that is stored in our directory

## CSV file stored locally

**Waste Characterization Data, Abidjan, Cote d'Ivoire**

The data in this exercise come from a study undertaken in Abidjan, Cote d'Ivore (Waste2Worth Innovations, 2020). The data is stored in the sub-folder "raw_data" within the "data" folder. We are using a function from the `readr` R Package to import the data.

```{r}

# Explain:

# R Packages 
# Install once, load for every script

library(readr)

# Explain: 

# file path
## qmd and rmd always look in directory that they are stored

# Explain:

# function
# argument
# assignment operator
# object
# Environment

waste_data <- read_csv(file = "data/raw_data/abidjan-waste-characterization.csv")

```

```{r}

# Explain: dplyr

# An R Package for data manipulation
# glimpse() function is part of that R Package
# other functions are part of base R (come with R installation)

library(dplyr)

waste_data
glimpse(waste_data)
str(waste_data)
nrow(waste_data)
ncol(waste_data)

```

# Data tidying

## Waste characterization data

**Look at the output in the console**

1.  Which principles for data organisation in spreadsheets are not followed?

-   Principle 3: Choose Good Names for Things
-   Principle 4: Write Dates as YYYY-MM-DD

```{r}

# Take a look at the data

waste_data 

# rename dplyr function

# The three rules:

# 1. First argument is always a data frame
# 2. Subsequent arguments say what to do with that data frame
# 3. Always return a data frame
# 4. Don't modify in place

rename(.data = waste_data, Mass = `mass (kg)`)

rename(waste_data, Mass = `mass (kg)`)

waste_data %>% 
  rename(Mass = `mass (kg)`)

waste_data_tidy <- waste_data %>% 
  rename(Mass = `mass (kg)`)

```


# Data transformation

## Waste characterization data

**Goal:** Calculate the percentages of waste types for sample number 23-A1.

```{r}

# Step 1: Filter for one sample

waste_data_tidy %>% 
  filter(Sample == "23-A1") 

# Step 2: arrange for Mass, filter out 0s

waste_data_tidy %>% 
  filter(Sample == "23-A1") %>% 
  arrange(Mass) %>% 
  filter(Mass != 0)

# Step 3: add percentage column with mutate

waste_data_23_A1 <- waste_data_tidy %>% 
  filter(Sample == "23-A1") %>% 
  arrange(desc(Mass)) %>% 
  filter(Mass != 0) %>% 
  mutate(Percent = Mass / sum(Mass) * 100) 

# Step 4: Print to console

waste_data_23_A1

```


# Data visualisation (and tables)

## Waste characterization data

Half of the waste in sample 23-A1 was found to be in the Food/Organic category (see @tbl-one-sample).

```{r}
#| label: tbl-one-sample
#| tbl-cap: "Mass in kilogram and percentages of waste categories in sample 23-A1"

# Step 1: Use select function to select columns

# Step 2: Explain tables display and knitr package


library(knitr)

waste_data_23_A1 %>%
  select(Category, Mass, Percent) %>% 
  kable(digits = 1) 

```

# References

Waste2Worth Innovations. (2020). Abidjan, Cote
d'Ivoire, waste characterization data, Feb-Mar 2018 \[Data set\]. Zenodo.
https://doi.org/10.5281/zenodo.4012765
